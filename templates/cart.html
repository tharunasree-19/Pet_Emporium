{% extends "base.html" %}

{% block title %}Shopping Cart - Paws & Claws Pet Shop{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
    <h1 style="font-size: 36px;">üõí Shopping Cart</h1>
    <a href="/products" class="btn">Continue Shopping</a>
</div>

{% if cart_items %}
<div class="grid" style="grid-template-columns: 2fr 1fr; gap: 32px;">
    <!-- Cart Items -->
    <div>
        {% for item in cart_items %}
        <div class="card" style="margin-bottom: 16px;">
            <div style="display: flex; gap: 16px;">
                <!-- Product Image -->
                <div style="flex-shrink: 0;">
                    {% if item.product.image_url %}
                    <img src="{{ item.product.image_url }}" alt="{{ item.product.name }}"
                         style="width: 100px; height: 100px; object-fit: cover; border-radius: 6px;">
                    {% else %}
                    <div style="width: 100px; height: 100px; background-color: var(--color-canvas-subtle);
                                border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 32px;">
                        üêæ
                    </div>
                    {% endif %}
                </div>

                <!-- Product Details -->
                <div style="flex: 1;">
                    <h3 style="margin-bottom: 8px;">
                        <a href="/product/{{ item.product.product_id }}"
                           style="color: var(--color-fg-default); text-decoration: none;">
                            {{ item.product.name }}
                        </a>
                    </h3>

                    <p style="color: var(--color-fg-muted); margin-bottom: 12px; font-size: 14px;">
                        {{ item.product.description[:80] }}{% if item.product.description|length > 80 %}...{% endif %}
                    </p>

                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <span style="color: var(--color-fg-muted);">Price: </span>
                            <span style="font-weight: 600;">‚Çπ{{ item.product.price }}</span>
                            <span style="color: var(--color-fg-muted); margin-left: 16px;">Qty: {{ item.cart_item.quantity }}</span>
                        </div>

                        <div style="display: flex; align-items: center; gap: 16px;">
                            <span style="font-size: 18px; font-weight: 600; color: var(--color-success-fg);">
                                ‚Çπ{{ "%.2f"|format(item.item_total) }}
                            </span>
                            <a href="/cart/remove/{{ item.cart_item.cart_id }}"
                               class="btn btn-danger" style="font-size: 12px; padding: 4px 8px;"
                               onclick="return confirm('Remove this item from your cart?');">
                                Remove
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Order Summary -->
    <div>
        <div class="card" style="position: sticky; top: 100px;">
            <h3 style="margin-bottom: 16px;">Order Summary</h3>

            <div style="border-bottom: 1px solid var(--color-border-default); padding-bottom: 16px; margin-bottom: 16px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span>Items ({{ cart_items|length }}):</span>
                    <span>‚Çπ{{ "%.2f"|format(total_amount) }}</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: var(--color-fg-muted);">
                    <span>Shipping:</span>
                    <span>Free</span>
                </div>
            </div>

            <div style="display: flex; justify-content: space-between; font-size: 18px; font-weight: 600; margin-bottom: 24px;">
                <span>Total:</span>
                <span style="color: var(--color-success-fg);">‚Çπ{{ "%.2f"|format(total_amount) }}</span>
            </div>

            <a href="/checkout" class="btn btn-primary" style="width: 100%; text-align: center; padding: 12px;">
                Proceed to Checkout ‚Üí
            </a>
        </div>
    </div>
</div>
{% else %}
<!-- Empty Cart -->
<div style="text-align: center; padding: 64px 0;">
    <div style="font-size: 64px; margin-bottom: 16px;">üõí</div>
    <h2 style="margin-bottom: 8px;">Your cart is empty</h2>
    <p style="color: var(--color-fg-muted); margin-bottom: 24px;">
        Add some products to get started!
    </p>
    <a href="/products" class="btn btn-primary">Shop Now</a>
</div>
{% endif %}
{% endblock %}
